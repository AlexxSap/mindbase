Теги сборки Go предоставляют мощный механизм для включения или исключения определенного кода в процессе сборки. Используя теги сборки, разработчики могут адаптировать свое приложение к работе с различными конфигурациями сборки, средами или требованиями конкретной платформы. Эта функция особенно ценна при кросс-компиляции или создании двоичных файлов для конкретных операционных систем.
Тег сборки - это комментарий, помещаемый в начале исходного файла Go, который определяет набор условий, при выполнении которых код внутри этого файла должен быть включен или исключен из сборки. Синтаксис //go:build . Например, рассмотрим сценарий, в котором вы хотите включить определенный фрагмент кода только при сборке для определенной версии приложения:

`main.go`  
```go
package main

import "fmt"

var version string

func main() {
    fmt.Println(version)
}
```

`pro.go`  
```go
//go:build pro

package main

func init() {
    version = "pro"
}
```

`free.go`  
```go
//go:build free

package main

func init() {
    version = "pro"
}
```

При сборке с помощью `-tags=free` результат будет таким, `free` потому что `free.go` файл был включен. А при сборке с помощью `-tags=pro` результат будет таким`pro`.

Вы можете комбинировать ограничения таким же образом, как и любой другой условный оператор в программировании, т. е. AND ( && ), ИЛИ  ( || ),  NOT ( ! )

## Ограничения при сборке

**1. Значения среды OOS и GOARCH**  
Вы можете установить ограничения в своем исходном коде, чтобы запускать файлы только в том случае, если используется определенный GOOS или GOARCH. например  

```go
//go:build darwin,amd64

package utils
```

**2. Ограничение версии GO**

Вы также можете ограничить включение файла версией go, используемой при сборке всего модуля. НАПРИМЕР, для сборки файла, только если используется версия go 1.12 и выше, вы должны использовать `//go:build go1.18`. Сюда будет входить файл, если версия go 1.18 или 1.21 (последняя на момент написания этой статьи).