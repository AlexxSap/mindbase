* Установка GHCup
#+begin_src shell
curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | sh
#+end_src
В файле .bashrc добавляем в PATH каталог .ghcup/bin

* Устанавливаем форматтер
#+begin_src shell
stack install fourmolu
#+end_src

* Удалить ghcup можно командой
#+begin_src shell
ghcup nuke
#+end_src
После этого ручками удалить папку ~/.ghcup

* Настройка emacs
В файле init.el раскомментируем
#+begin_src
(haskell +lsp +tree-sitter)    ; a language that's lazier than I am
#+end_src

В config.el добавляем
#+begin_src
(require 'lsp)
(require 'lsp-haskell)
;; Hooks so haskell and literate haskell major modes trigger LSP setup
(add-hook 'haskell-mode-hook #'lsp)
(add-hook 'haskell-literate-mode-hook #'lsp)
(setq haskell-stylish-on-save t)
#+end_src

* Запуск
Создаём проект (real это имя проекта)
#+begin_src
stack new real
#+end_src

Для создания проекта можно использовать схему simple - она создаёт меньше файлов в проекте.
#+begin_src
stack new real simple
#+end_src

Собираем
#+begin_src
stack build
#+end_src

Внутри каталога .stack-work появиться исполняемый файл, его можно запустить так
#+begin_src
stack exec real
#+end_src

Форматировать файл
#+begin_src
fourmolu -i Module.hs
#+end_src

Форматировать каталог
#+begin_src
fourmolu -i src
#+end_src

* Обязательные программы
• ghc - компилятор
• hls - lsp
• cabal - мэнеджер
• cabal-gilt - форматтер для cabal файлов
• fourmolu - форматтер для исходников
• hlint - линтер исходников, встраивается в flycheck
• apply-refact - что-то для рефакторинга
